{% extends 'base.html' %} {% block content %}
<style>
    .dashboard_body {
        color: var(--type-primary);
    }
    .ticket_and_favorites {
        display: flex;
        flex-direction: row;
        justify-content: space-between;
        align-items: center;
        width: 100%;
        padding: 0;
    }
    .all_users_tickets {
        display: flex;
        flex-direction: column;
        width: 50%;
        max-width: 50%;
        height: 100%;
        padding: 0;
    }
    .all_users_favorites {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        width: 50%;
        max-width: 50%;
        height: 100%;
        padding: 0;
    }
    .row_of_tickets {
        display: flex;
        flex-direction: row;
        align-items: center;
        padding: 0;
        gap: 32px;
        width: 100%;
        overflow-x: scroll;
        padding-bottom: 20px;
    }
</style>
<script>
    const sourceParts = window.location.href.split("/");
    const BASE_URL = sourceParts[0] + "//" + sourceParts[2];

    $(document).ready(function () {
        $(".js-example-basic-multiple").select2();
    });
    async function funcForUersFavCatSelected() {
        console.log("test", $("#users_fav_cat_selected").select2("data"));
        const url = BASE_URL + "/api/user_categories";
        const res = await fetch(url, {
            method: "PUT",
            headers: {
                "Content-Type": "application/json",
            },
            body: JSON.stringify({
                users_fav_cat_selected: $("#users_fav_cat_selected").select2(
                    "data"
                ),
            }),
        });
    }
    function func_for_users_fav_ent_selected() {
        console.log("test", $("#select_entertainers").select2("data"));
    }
</script>

<div class="dashboard_body">
    <div class="ticket_and_favorites">
        <div class="all_users_favorites">
            <p>fav entertainers</p>

            <div style="color: black; width: 100%">
                <select
                    class="js-example-basic-multiple"
                    name="states[]"
                    multiple="multiple"
                    style="width: 100%"
                    id="select_entertainers"
                >
                    {% for entertainer in user_fav_ent %}
                    <option value="{{entertainer.id}}" selected>
                        {{entertainer.name}}
                    </option>
                    {% endfor %} {% for entertainer in rest_fav_ent %}
                    <option value="{{entertainer.id}}">
                        {{entertainer.name}}
                    </option>
                    {% endfor %}
                </select>
                <button onclick="func_for_users_fav_ent_selected()">
                    Save changes
                </button>
            </div>
            <p>fav categories</p>

            <p>{{user_fav_cat_list}}</p>
            <div style="color: black; width: 100%">
                <select
                    id="users_fav_cat_selected"
                    class="js-example-basic-multiple"
                    name="states[]"
                    multiple="multiple"
                    style="width: 100%"
                    id="select_categories"
                >
                    {% for category in user_fav_cate %}
                    <option value="{{category.id}}" selected>
                        {{category.name}}
                    </option>
                    {% endfor %} {% for category in rest_fav_cate %}
                    <option value="{{category.id}}">{{category.name}}</option>
                    {% endfor %}
                </select>
                <button onclick="funcForUersFavCatSelected()">
                    Save changes
                </button>
            </div>
        </div>
        <div class="all_users_tickets">
            <p class="h3_regular">Your tickets</p>
            <div class="row_of_tickets">
                {% for ticket in query_dashboard_user_tickets_results %}
                <div>
                    {% include 'ticket_info_card.html' with ticket=ticket %}
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
    <p class="h3_regular">
        Upcomming events matching your favorite categories and events
    </p>
    <div class="row-of-cards">
        {% for event in query_dashboard_user_fav_cat_ent_events_res %}
        <div>{% include 'info_card.html' with event=event %}</div>
        {% endfor %}
    </div>
</div>
{% endblock %}
